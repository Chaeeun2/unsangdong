{"ast":null,"code":"import ColorSpace from \"../space.js\";\nimport { WHITES } from \"../adapt.js\";\nimport xyz_d65 from \"./xyz-d65.js\";\nimport { uv } from \"../chromaticity.js\";\nimport { isNone, skipNone } from \"../util.js\";\nlet white = WHITES.D65;\nconst ε = 216 / 24389; // 6^3/29^3 == (24/116)^3\nconst κ = 24389 / 27; // 29^3/3^3\nconst [U_PRIME_WHITE, V_PRIME_WHITE] = uv({\n  space: xyz_d65,\n  coords: white\n});\nexport default new ColorSpace({\n  id: \"luv\",\n  name: \"Luv\",\n  coords: {\n    l: {\n      refRange: [0, 100],\n      name: \"Lightness\"\n    },\n    // Reference ranges from https://facelessuser.github.io/coloraide/colors/luv/\n    u: {\n      refRange: [-215, 215]\n    },\n    v: {\n      refRange: [-215, 215]\n    }\n  },\n  white: white,\n  base: xyz_d65,\n  // Convert D65-adapted XYZ to Luv\n  // https://en.wikipedia.org/wiki/CIELUV#The_forward_transformation\n  fromBase(XYZ) {\n    let xyz = [skipNone(XYZ[0]), skipNone(XYZ[1]), skipNone(XYZ[2])];\n    let y = xyz[1];\n    let [up, vp] = uv({\n      space: xyz_d65,\n      coords: xyz\n    });\n\n    // Protect against XYZ of [0, 0, 0]\n    if (!Number.isFinite(up) || !Number.isFinite(vp)) {\n      return [0, 0, 0];\n    }\n    let L = y <= ε ? κ * y : 116 * Math.cbrt(y) - 16;\n    return [L, 13 * L * (up - U_PRIME_WHITE), 13 * L * (vp - V_PRIME_WHITE)];\n  },\n  // Convert Luv to D65-adapted XYZ\n  // https://en.wikipedia.org/wiki/CIELUV#The_reverse_transformation\n  toBase(Luv) {\n    let [L, u, v] = Luv;\n\n    // Protect against division by zero and NaN Lightness\n    if (L === 0 || isNone(L)) {\n      return [0, 0, 0];\n    }\n    u = skipNone(u);\n    v = skipNone(v);\n    let up = u / (13 * L) + U_PRIME_WHITE;\n    let vp = v / (13 * L) + V_PRIME_WHITE;\n    let y = L <= 8 ? L / κ : Math.pow((L + 16) / 116, 3);\n    return [y * (9 * up / (4 * vp)), y, y * ((12 - 3 * up - 20 * vp) / (4 * vp))];\n  },\n  formats: {\n    color: {\n      id: \"--luv\",\n      coords: [\"<number> | <percentage>\", \"<number> | <percentage>[-1,1]\", \"<number> | <percentage>[-1,1]\"]\n    }\n  }\n});","map":{"version":3,"names":["ColorSpace","WHITES","xyz_d65","uv","isNone","skipNone","white","D65","ε","κ","U_PRIME_WHITE","V_PRIME_WHITE","space","coords","id","name","l","refRange","u","v","base","fromBase","XYZ","xyz","y","up","vp","Number","isFinite","L","Math","cbrt","toBase","Luv","pow","formats","color"],"sources":["/Users/lyuchaeeun/Desktop/unsaengdong/node_modules/colorjs.io/src/spaces/luv.js"],"sourcesContent":["import ColorSpace from \"../space.js\";\nimport {WHITES} from \"../adapt.js\";\nimport xyz_d65 from \"./xyz-d65.js\";\nimport {uv} from \"../chromaticity.js\";\nimport {isNone, skipNone} from \"../util.js\";\n\nlet white = WHITES.D65;\n\nconst ε = 216 / 24389;  // 6^3/29^3 == (24/116)^3\nconst κ = 24389 / 27;   // 29^3/3^3\nconst [U_PRIME_WHITE, V_PRIME_WHITE] = uv({space: xyz_d65, coords: white});\n\nexport default new ColorSpace({\n\tid: \"luv\",\n\tname: \"Luv\",\n\tcoords: {\n\t\tl: {\n\t\t\trefRange: [0, 100],\n\t\t\tname: \"Lightness\",\n\t\t},\n\t\t// Reference ranges from https://facelessuser.github.io/coloraide/colors/luv/\n\t\tu: {\n\t\t\trefRange: [-215, 215],\n\t\t},\n\t\tv: {\n\t\t\trefRange: [-215, 215],\n\t\t},\n\t},\n\n\twhite: white,\n\tbase: xyz_d65,\n\n\t// Convert D65-adapted XYZ to Luv\n\t// https://en.wikipedia.org/wiki/CIELUV#The_forward_transformation\n\tfromBase (XYZ) {\n\t\tlet xyz = [skipNone(XYZ[0]), skipNone(XYZ[1]), skipNone(XYZ[2])];\n\t\tlet y = xyz[1];\n\n\t\tlet [up, vp] = uv({space: xyz_d65, coords: xyz});\n\n\t\t// Protect against XYZ of [0, 0, 0]\n\t\tif (!Number.isFinite(up) || !Number.isFinite(vp)) {\n\t\t\treturn [0, 0, 0];\n\t\t}\n\n\t\tlet L = y <= ε ? κ * y : 116 * Math.cbrt(y) - 16;\n\t\treturn [\n\t\t\tL,\n\t\t\t13 * L * (up - U_PRIME_WHITE),\n\t\t\t13 * L * (vp - V_PRIME_WHITE),\n\t\t ];\n\t},\n\n\t// Convert Luv to D65-adapted XYZ\n\t// https://en.wikipedia.org/wiki/CIELUV#The_reverse_transformation\n\ttoBase (Luv) {\n\t\tlet [L, u, v] = Luv;\n\n\t\t// Protect against division by zero and NaN Lightness\n\t\tif (L === 0 || isNone(L)) {\n\t\t\treturn [0, 0, 0];\n\t\t}\n\n\t\tu = skipNone(u);\n\t\tv = skipNone(v);\n\n\t\tlet up = (u / (13 * L)) + U_PRIME_WHITE;\n\t\tlet vp = (v / (13 * L)) + V_PRIME_WHITE;\n\n\t\tlet y = L <= 8 ? L / κ : Math.pow((L + 16) / 116, 3);\n\n\t\treturn [\n\t\t\ty * ((9 * up) / (4 * vp)),\n\t\t\ty,\n\t\t\ty * ((12 - 3 * up - 20 * vp) / (4 * vp)),\n\t\t];\n\t},\n\n\tformats: {\n\t\tcolor: {\n\t\t\tid: \"--luv\",\n\t\t\tcoords: [\"<number> | <percentage>\", \"<number> | <percentage>[-1,1]\", \"<number> | <percentage>[-1,1]\"],\n\t\t},\n\t},\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}