{"ast":null,"code":"import ColorSpace from \"../space.js\";\nimport { multiplyMatrices } from \"../util.js\";\nimport XYZ_D65 from \"./xyz-d65.js\";\n\n// Recalculated for consistent reference white\n// see https://github.com/w3c/csswg-drafts/issues/6642#issuecomment-943521484\nconst XYZtoLMS_M = [[0.8190224379967030, 0.3619062600528904, -0.1288737815209879], [0.0329836539323885, 0.9292868615863434, 0.0361446663506424], [0.0481771893596242, 0.2642395317527308, 0.6335478284694309]];\n// inverse of XYZtoLMS_M\nconst LMStoXYZ_M = [[1.2268798758459243, -0.5578149944602171, 0.2813910456659647], [-0.0405757452148008, 1.1122868032803170, -0.0717110580655164], [-0.0763729366746601, -0.4214933324022432, 1.5869240198367816]];\nconst LMStoLab_M = [[0.2104542683093140, 0.7936177747023054, -0.0040720430116193], [1.9779985324311684, -2.4285922420485799, 0.4505937096174110], [0.0259040424655478, 0.7827717124575296, -0.8086757549230774]];\n// LMStoIab_M inverted\nconst LabtoLMS_M = [[1.0000000000000000, 0.3963377773761749, 0.2158037573099136], [1.0000000000000000, -0.1055613458156586, -0.0638541728258133], [1.0000000000000000, -0.0894841775298119, -1.2914855480194092]];\nexport default new ColorSpace({\n  id: \"oklab\",\n  name: \"Oklab\",\n  coords: {\n    l: {\n      refRange: [0, 1],\n      name: \"Lightness\"\n    },\n    a: {\n      refRange: [-0.4, 0.4]\n    },\n    b: {\n      refRange: [-0.4, 0.4]\n    }\n  },\n  // Note that XYZ is relative to D65\n  white: \"D65\",\n  base: XYZ_D65,\n  fromBase(XYZ) {\n    // move to LMS cone domain\n    let LMS = multiplyMatrices(XYZtoLMS_M, XYZ);\n\n    // non-linearity\n    let LMSg = LMS.map(val => Math.cbrt(val));\n    return multiplyMatrices(LMStoLab_M, LMSg);\n  },\n  toBase(OKLab) {\n    // move to LMS cone domain\n    let LMSg = multiplyMatrices(LabtoLMS_M, OKLab);\n\n    // restore linearity\n    let LMS = LMSg.map(val => val ** 3);\n    return multiplyMatrices(LMStoXYZ_M, LMS);\n  },\n  formats: {\n    \"oklab\": {\n      coords: [\"<percentage> | <number>\", \"<number> | <percentage>[-1,1]\", \"<number> | <percentage>[-1,1]\"]\n    }\n  }\n});","map":{"version":3,"names":["ColorSpace","multiplyMatrices","XYZ_D65","XYZtoLMS_M","LMStoXYZ_M","LMStoLab_M","LabtoLMS_M","id","name","coords","l","refRange","a","b","white","base","fromBase","XYZ","LMS","LMSg","map","val","Math","cbrt","toBase","OKLab","formats"],"sources":["/Users/lyuchaeeun/Desktop/unsaengdong/node_modules/colorjs.io/src/spaces/oklab.js"],"sourcesContent":["import ColorSpace from \"../space.js\";\nimport {multiplyMatrices} from \"../util.js\";\nimport XYZ_D65 from \"./xyz-d65.js\";\n\n// Recalculated for consistent reference white\n// see https://github.com/w3c/csswg-drafts/issues/6642#issuecomment-943521484\nconst XYZtoLMS_M = [\n\t[ 0.8190224379967030, 0.3619062600528904, -0.1288737815209879 ],\n\t[ 0.0329836539323885, 0.9292868615863434,  0.0361446663506424 ],\n\t[ 0.0481771893596242, 0.2642395317527308,  0.6335478284694309 ],\n];\n// inverse of XYZtoLMS_M\nconst LMStoXYZ_M = [\n\t[  1.2268798758459243, -0.5578149944602171,  0.2813910456659647 ],\n\t[ -0.0405757452148008,  1.1122868032803170, -0.0717110580655164 ],\n\t[ -0.0763729366746601, -0.4214933324022432,  1.5869240198367816 ],\n];\nconst LMStoLab_M = [\n\t[ 0.2104542683093140,  0.7936177747023054, -0.0040720430116193 ],\n\t[ 1.9779985324311684, -2.4285922420485799,  0.4505937096174110 ],\n\t[ 0.0259040424655478,  0.7827717124575296, -0.8086757549230774 ],\n];\n// LMStoIab_M inverted\nconst LabtoLMS_M = [\n\t[ 1.0000000000000000,  0.3963377773761749,  0.2158037573099136 ],\n\t[ 1.0000000000000000, -0.1055613458156586, -0.0638541728258133 ],\n\t[ 1.0000000000000000, -0.0894841775298119, -1.2914855480194092 ],\n];\n\nexport default new ColorSpace({\n\tid: \"oklab\",\n\tname: \"Oklab\",\n\tcoords: {\n\t\tl: {\n\t\t\trefRange: [0, 1],\n\t\t\tname: \"Lightness\",\n\t\t},\n\t\ta: {\n\t\t\trefRange: [-0.4, 0.4],\n\t\t},\n\t\tb: {\n\t\t\trefRange: [-0.4, 0.4],\n\t\t},\n\t},\n\n\t// Note that XYZ is relative to D65\n\twhite: \"D65\",\n\tbase: XYZ_D65,\n\tfromBase (XYZ) {\n\t\t// move to LMS cone domain\n\t\tlet LMS = multiplyMatrices(XYZtoLMS_M, XYZ);\n\n\t\t// non-linearity\n\t\tlet LMSg = LMS.map(val => Math.cbrt(val));\n\n\t\treturn multiplyMatrices(LMStoLab_M, LMSg);\n\n\t},\n\ttoBase (OKLab) {\n\t\t// move to LMS cone domain\n\t\tlet LMSg = multiplyMatrices(LabtoLMS_M, OKLab);\n\n\t\t// restore linearity\n\t\tlet LMS = LMSg.map(val => val ** 3);\n\n\t\treturn multiplyMatrices(LMStoXYZ_M, LMS);\n\t},\n\n\tformats: {\n\t\t\"oklab\": {\n\t\t\tcoords: [\"<percentage> | <number>\", \"<number> | <percentage>[-1,1]\", \"<number> | <percentage>[-1,1]\"],\n\t\t},\n\t},\n});\n"],"mappings":"AAAA,OAAOA,UAAU,MAAM,aAAa;AACpC,SAAQC,gBAAgB,QAAO,YAAY;AAC3C,OAAOC,OAAO,MAAM,cAAc;;AAElC;AACA;AACA,MAAMC,UAAU,GAAG,CAClB,CAAE,kBAAkB,EAAE,kBAAkB,EAAE,CAAC,kBAAkB,CAAE,EAC/D,CAAE,kBAAkB,EAAE,kBAAkB,EAAG,kBAAkB,CAAE,EAC/D,CAAE,kBAAkB,EAAE,kBAAkB,EAAG,kBAAkB,CAAE,CAC/D;AACD;AACA,MAAMC,UAAU,GAAG,CAClB,CAAG,kBAAkB,EAAE,CAAC,kBAAkB,EAAG,kBAAkB,CAAE,EACjE,CAAE,CAAC,kBAAkB,EAAG,kBAAkB,EAAE,CAAC,kBAAkB,CAAE,EACjE,CAAE,CAAC,kBAAkB,EAAE,CAAC,kBAAkB,EAAG,kBAAkB,CAAE,CACjE;AACD,MAAMC,UAAU,GAAG,CAClB,CAAE,kBAAkB,EAAG,kBAAkB,EAAE,CAAC,kBAAkB,CAAE,EAChE,CAAE,kBAAkB,EAAE,CAAC,kBAAkB,EAAG,kBAAkB,CAAE,EAChE,CAAE,kBAAkB,EAAG,kBAAkB,EAAE,CAAC,kBAAkB,CAAE,CAChE;AACD;AACA,MAAMC,UAAU,GAAG,CAClB,CAAE,kBAAkB,EAAG,kBAAkB,EAAG,kBAAkB,CAAE,EAChE,CAAE,kBAAkB,EAAE,CAAC,kBAAkB,EAAE,CAAC,kBAAkB,CAAE,EAChE,CAAE,kBAAkB,EAAE,CAAC,kBAAkB,EAAE,CAAC,kBAAkB,CAAE,CAChE;AAED,eAAe,IAAIN,UAAU,CAAC;EAC7BO,EAAE,EAAE,OAAO;EACXC,IAAI,EAAE,OAAO;EACbC,MAAM,EAAE;IACPC,CAAC,EAAE;MACFC,QAAQ,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;MAChBH,IAAI,EAAE;IACP,CAAC;IACDI,CAAC,EAAE;MACFD,QAAQ,EAAE,CAAC,CAAC,GAAG,EAAE,GAAG;IACrB,CAAC;IACDE,CAAC,EAAE;MACFF,QAAQ,EAAE,CAAC,CAAC,GAAG,EAAE,GAAG;IACrB;EACD,CAAC;EAED;EACAG,KAAK,EAAE,KAAK;EACZC,IAAI,EAAEb,OAAO;EACbc,QAAQA,CAAEC,GAAG,EAAE;IACd;IACA,IAAIC,GAAG,GAAGjB,gBAAgB,CAACE,UAAU,EAAEc,GAAG,CAAC;;IAE3C;IACA,IAAIE,IAAI,GAAGD,GAAG,CAACE,GAAG,CAACC,GAAG,IAAIC,IAAI,CAACC,IAAI,CAACF,GAAG,CAAC,CAAC;IAEzC,OAAOpB,gBAAgB,CAACI,UAAU,EAAEc,IAAI,CAAC;EAE1C,CAAC;EACDK,MAAMA,CAAEC,KAAK,EAAE;IACd;IACA,IAAIN,IAAI,GAAGlB,gBAAgB,CAACK,UAAU,EAAEmB,KAAK,CAAC;;IAE9C;IACA,IAAIP,GAAG,GAAGC,IAAI,CAACC,GAAG,CAACC,GAAG,IAAIA,GAAG,IAAI,CAAC,CAAC;IAEnC,OAAOpB,gBAAgB,CAACG,UAAU,EAAEc,GAAG,CAAC;EACzC,CAAC;EAEDQ,OAAO,EAAE;IACR,OAAO,EAAE;MACRjB,MAAM,EAAE,CAAC,yBAAyB,EAAE,+BAA+B,EAAE,+BAA+B;IACrG;EACD;AACD,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}